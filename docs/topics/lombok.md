[//]: # (title: Lombok compiler plugin (experimental))

> The new Lombok compiler plugin is [Experimental](https://kotlinlang.org/docs/components-stability.html). 
> It may be dropped or changed at any time. 
> We would appreciate hearing your feedback on it in [YouTrack](https://youtrack.jetbrains.com/issue/KT-7112).
>
{type="warning"}

Experimental Lombok Kotlin compiler plugin allows the use of Java's Lombok-generated declarations in mixed Kotlin/Java sources.
In other words, it allows compiling Kotlin code that resides with Java code in the same module and uses Java's Lombok-generated declarations. 
If Java's Lombok-generated declarations are in another module than the Kotlin code that uses these declarations, 
then you don't need to use this plugin.

Java code generation is done by [Lombok](https://projectlombok.org/) itself, not the Lombok Kotlin compiler plugin. 
> Lombok annotations are ignored if you use them in Kotlin code.
>
{type="note"}

Learn which annotations the plugin supports and 
[the current state of Lombok Kotlin compiler plugin](https://github.com/JetBrains/kotlin/blob/master/plugins/lombok/lombok-compiler-plugin/README.md).

> Generation of `@Builder` annotation won't be supported in the current prototype. However, you can give your feedback 
> about the plugin and vote for [`@Builder` in YouTrack](https://youtrack.jetbrains.com/issue/KT-46959).
>
{type="warning"}

## Using along with kapt

//The Lombok compiler plugin works successfully along with [kapt](kapt.md) if annotations processors don't depend on the code generated by Lombok.

Java's Lombok should be launched via annotation processor of Java's compiler.
By default, kapt assumes that all annotation processors work through it and disables javac annotation processors.
To make Lombok working, you need to change this behaviour.

If you use Gradle build system, add the additional flag to the `build.gradle` file to make javac annotations processors working:

```
kapt {
    keepJavacAnnotationProcessors = true
}
```

If you use Maven, use the following settings to make Lombok launched by javac: //TODO javac

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.5.1</version>
    <configuration>
        <source>1.8</source>
        <target>1.8</target>
        <annotationProcessorPaths>
            <annotationProcessorPath>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
                <version>${lombok.version}</version>
            </annotationProcessorPath>
        </annotationProcessorPaths>
    </configuration>
</plugin>    
```

## Usage in Gradle

Apply the `kotlin-plugin-lombok` Gradle plugin:

<tabs>

```groovy
plugins {
    id "org.jetbrains.kotlin.plugin.lombok" version "%kotlinVersion%"
}
```

```kotlin
plugins {
    kotlin("plugin.lombok") version "%kotlinVersion%"
}
```

</tabs>

Alternatively, you can use the `apply plugin` syntax:

```groovy
apply plugin: 'kotlin-plugin-lombok'
```

The Lombok itself should be set up as the Java annotation processor (not via kapt), or as the plugin: //TODO add about kapt?

<tabs>

```groovy
plugins {
    id "io.freefair.lombok" version "5.3.0"
}
```

```kotlin
plugins {
    kotlin("io.freefair.lombok") version "5.3.0"
}
```

</tabs>

Now the plugin has basic configuration support â€“ the single configuration file named `lombok.config`. 
To define where it situates, use the following syntax:

kotlinLombok {
lombokConfigurationFile(file("lombok.config"))
}

<tabs>

```groovy
kotlinLombok {
    lombokConfigurationFile(file("lombok.config"))
}
```

```kotlin
kotlinLombok {
    lombokConfigurationFile(file("lombok.config")) //TODO check
}
```

</tabs>

//TODO the link to the test project

## Maven

```
<plugin>
    <groupId>org.jetbrains.kotlin</groupId>
    <artifactId>kotlin-maven-plugin</artifactId>
    <version>${kotlin.version}</version>
    <configuration>
        <compilerPlugins>
            <plugin>lombok</plugin>
        </compilerPlugins>
        <pluginOptions>
            <option>lombok:config=${project.basedir}/lombok.config</option>
        </pluginOptions>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>org.jetbrains.kotlin</groupId>
            <artifactId>kotlin-maven-lombok</artifactId>
            <version>${kotlin.version}</version>
        </dependency>
    </dependencies>
</plugin>
```

## How to set up lombok.config